<!DOCTYPE html>
<html>

<head lang="en">
	<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Italian Quiz</title>
	<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
	<script type="text/javascript"></script>
    <style type="text/css">
        body{
            font-size: 20px;
        }
    </style>
	
</head>

<body>
	<div class="grid">
		<div id="quiz">
				<div style="text-align: center;"> <p style="text-align: center;">
    <strong><span style="font-size: 50px;">Test Your Italian Knowledge Now!</span></strong>
</p>
					<button id="start" class="btn btn-success btn-lg">START</button></div>
			
		</div>
	</div>

	<script>
    
    class Quiz {
        constructor(questions) {
            this.question = questions;
            this.score = 0;
        }
    }

    class Question{
        constructor(text, choices, feedback, url, source='') {
            this.text = text;
            this.choices = choices;
            this.feedback = feedback;
            this.graphUrl = url;
            this.source = source
            //this.score = score
        }
    }

    class Choice {
        constructor(text, score) {
            this.text = text;
            this.score = score;
        }
    }

    //Question1
    var q1Choices = [new Choice("A. 10-30 ", 0),
    new Choice("B. 40-70", 0),
    new Choice("C. 70-110", 0),
    new Choice("D. More than 110", 1)];
    var feedback1 = "There are approximately 310 different types of pasta! Can you image that? Pasta, which is made from semolina mixed with water or eggs, is a type of famous food in Italy. It could be divided into two categories, dried and fresh. Normally speaking, most dried pastas are produced by machine (For which you tried most!), fresh one is handmade. With various shapes and variety, pasta could have more than 310 names!";
    var url1 = "";
    var question1 = new Question("Have you tried pasta? Do you know how many types of pasta in Italian culture?", q1Choices, feedback1, url1);


    //Question2
    var q2Choices = [new Choice("A. Hard ice cream", 0),
    new Choice("B. Soft ice cream", 0),
    new Choice("C. Gelato", 1),
    new Choice("D. Sorbet", 0)];
    var feedback2 = "Gelato is a popular frozen dessert in Italian. It made daily with fresh material(fruit, milk and so on)! With all natural ingredient and 70% less air, Gelato is well-known as “Italian ice cream” in the world.";
    var url2 = "";
    var question2 = new Question("Do you like ice cream? Do you know which kind of ice cream is popular in Italy?", q2Choices, feedback2, url2);

    //Question3
    var q3Choices = [new Choice("A. Dec 26", 0),
    new Choice("B. Dec 31", 0),
    new Choice("C. Jan 1", 0),
    new Choice("D. Jan 6", 1)];
    var feedback3 = "It’s January 6th! Can you image that Christmas season will last the January 6th in Italy.January 6th holiday, also known as “La Befana” There is a legend about “La Befana”. Befana, as beloved as Santas Claus in Italy, would come on the night before January 6th and leave their gifts in stockings. In this case, Italian kid would expect La Befana more than Christmas!";
    var url3 = "";
    var source3 = '';
    var question3 = new Question("As we know, we will receive a gift in Christmas Day in Australia, but do you know when is the day of Italian’s traditions?", q3Choices, feedback3, url3, source3);

    //Question4
    var q4Choices = [new Choice("A. Carnevale", 1),
    new Choice("B. Battle of the Orange", 0),
    new Choice("C. All Saint’s Day", 0),
    new Choice("D. Ferragosto", 0)];
    var feedback4 = "Venice’s Carnevale is held from January 27th to February 13th , celebrates the anticipation of Lent(a time when Christian do not eat meat).It’s famous for “extravagant masked ball”.";
    var url4 = "";
    var source4 = '';
    var question4 = new Question("Have you heard Venice? Do you know which festival is famous and popular in Venice?", q4Choices, feedback4, url4, source4);

    //Question5
    var q5Choices = [new Choice("A. Gladiatorial contest (fight with swords)", 0),
    new Choice("B. Animal hunts ", 0),
    new Choice("C. Dramas", 0),
    new Choice("D. Cooking", 1)];
    var feedback5 = "Correct Answer: Cooking";
    var url5 = "";
    var question5 = new Question("Do you know the famous building - “Colosseum” in Rome(which is capital of Italy)? Which function was not included in Colosseum?", q5Choices, feedback5, url5);



    //Quiz
    var allQuestions = [question1, question2, question3, question4, question5];
    
    var myQuiz = new Quiz(allQuestions);
    var index = 0
  

    function showFinalResult() {
        var endProgress = document.getElementById("progress");
        endProgress.innerHTML = "";
        var gameOverHTML = "<div id='result' style='display:none'>"
        if ( myQuiz.score > 4 ){
            gameOverHTML += "<h1>Great! It seem you’re familiar with your cultures!</h1>"
            gameOverHTML += "<h2 id='score' > Your score: " + myQuiz.score + "</h2>";
           
        } else{
            gameOverHTML +=  "<h1>Feeling confused? why not see others pages in our website!?</h1>"
            gameOverHTML += "<h2 id='score'> Your score: " + myQuiz.score + "</h2>";
          
        };
       
        gameOverHTML += '<br><br><button class="btn btn-success" id="retry" align="center">RE-TRY</button></div>';
        gameOverHTML += '<br><button id="end" class="btn btn-danger" align="center">FINISH</button></div><br>';


        var element = document.getElementById("questions");
        element.innerHTML = gameOverHTML;
        $("#result").fadeIn("slow");
        document.getElementById("retry").onclick = function () {
            document.location.reload(false);
        };
        document.getElementById("end").onclick = function () {
            window.location='https://retainourcultures.tk';
        };

       
    };

    function makeGuess(btnID, choice) {
        // body...
        var button = document.getElementById(btnID);
        button.onclick = function () {
            smoothScroll(document.getElementById('answer'));

            document.getElementById("btn0").disabled = true;
            document.getElementById("btn1").disabled = true;
            document.getElementById("btn2").disabled = true;
            document.getElementById("btn3").disabled = true;
            var element = document.getElementById("answer");

            
            var choices = myQuiz.question[index].choices;
            
            var correctButton = document.getElementById("btn1");
            for (var i = 0; i < choices.length; i++) {
                if (choices[i].score !== 0) {
                    correctButton = document.getElementById("btn" + i);
                    correctButton.style.color = "green"
                }
            }
            var feedbackHTML = ""
            if (choice.score !== 0) {
                feedbackHTML = "<div id='feedBack' ><h3>Correct!</h3>" + myQuiz.question[index].feedback;
            }
            else {
                button.style.color = "red";
                feedbackHTML = "<div id='feedBack' ><h3>You Could Do Better!</h3>" + myQuiz.question[index].feedback;
            }
            
            feedbackHTML += '<br><br><button id="quit" class="btn btn-danger" >QUIT</button>';
            feedbackHTML += '<button id="next" style="float:right" class="btn btn-success">NEXT</button></div>';
            
            element.innerHTML = feedbackHTML;
            $("#feedBack").fadeIn("slow");
            
            document.getElementById("quit").onclick = function(){
                window.location='https://retainourcultures.tk';
            }

            var next = document.getElementById("next");

          

            next.onclick = function () {
                smoothScroll(document.getElementById('questions'));
                myQuiz.score += choice.score;
                index += 1;
                button.style.color = "";
                correctButton.style.color = "";
               
                populate();
            }
        }
    }

    function showProgress() {
        var currentQuestionNumber = index + 1;
        var element = document.getElementById("progress");
        element.innerHTML = "Question " + currentQuestionNumber + " of " + myQuiz.question.length;
    };

    function clearAnswer() {
        //clear answer
        var element = document.getElementById("answer");
        element.innerHTML = "";
        document.getElementById("btn0").disabled = false;
        document.getElementById("btn1").disabled = false;
        document.getElementById("btn2").disabled = false;
        document.getElementById("btn3").disabled = false;
    }

    function populate() {
        clearAnswer();
        if (index < myQuiz.question.length) {
            //show question
            var element = document.getElementById("question");
            element.innerHTML = myQuiz.question[index].text;

            //show buttons
            for (var i = 0; i < 4; i++) {
                var element = document.getElementById("btn" + i);
                
            }

            //show choices
            var choices = myQuiz.question[index].choices;
            for (var i = 0; i < choices.length; i++) {
                var element = document.getElementById("choice" + i);
                element.innerHTML = choices[i].text;
                makeGuess("btn" + i, choices[i]);
            }
            // hide buttons
            for (var i = choices.length; i < 4; i++) {
                var element = document.getElementById("btn" + i);
                element.style.display = "none";
            }
            showProgress();
        }
        else {
            showFinalResult();
        }
    }

    function showCoverPage(){
        cover = document.getElementById("quiz")
        var start = document.getElementById("start");
        start.onclick = function (){
            newhtml = '<div id="questions">'
                    
            newhtml += '<h3 id="question"></h3>'
            newhtml += '<hr style="margin-bottom: 5px">'

            newhtml += '<div>'
            newhtml += '    <button id="btn0" style="width:500px; text-align: center" class="btn btn-info btn-lg btn-block"><span'
            newhtml += '            id="choice0"></span></button><br><br>'
            newhtml += '    <button id="btn1" style="width:500px; text-align: center" class="btn btn-info btn-lg btn-block"><span'
            newhtml += '            id="choice1"></span></button><br><br>'
            newhtml += '    <button id="btn2" style="width:500px; text-align: center" class="btn btn-info btn-lg btn-block"><span'
            newhtml += '            id="choice2"></span></button><br><br>'
            newhtml += '    <button id="btn3" style="width:500px; text-align: center" class="btn btn-info btn-lg btn-block"><span'
            newhtml += '            id="choice3"></span></button>'
            newhtml += '</div>'
            
            newhtml += '<br>'
            newhtml += '<div id="answerWindow">'
            newhtml += '    <p id="answer"></p>'
            newhtml += '</div>'
            newhtml += '</div>'
            newhtml += '<hr style="margin-top: 10px">'
            newhtml += '<p id="progress">Question x of y</p>'
            cover.innerHTML = newhtml
            populate();
        }
    }
      window.smoothScroll = function(target) {
        var scrollContainer = target;
        do { //find scroll container
            scrollContainer = scrollContainer.parentNode;
            if (!scrollContainer) return;
            scrollContainer.scrollTop += 1;
        } while (scrollContainer.scrollTop == 0);
        
        var targetY = 0;
        do { //find the top of target relatively to the container
            if (target == scrollContainer) break;
            targetY += target.offsetTop;
        } while (target = target.offsetParent);
        
        scroll = function(c, a, b, i) {
            i++; if (i > 30) return;
            c.scrollTop = a + (b - a) / 30 * i;
            setTimeout(function(){ scroll(c, a, b, i); }, 20);
        }
        // start scrolling
        scroll(scrollContainer, scrollContainer.scrollTop, targetY, 0);
    }

  

    showCoverPage();



</script>
	
</body>

</html>